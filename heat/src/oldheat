#include "buf.h"

int main()
{
     CircularBuffer buffer;
     initBuffer(&buffer, BUFFER_SIZE);

     pthread_t producerThread;     
     if (pthread_create(&producerThread,
                        NULL,
                        temperatureProducer,
                        (void *)&buffer) != 0)
     {
          perror("Failed to create thread");
          return 1;
     }

     while (1)
     {
          float value = 3;//getFromBuffer(&buffer);
          if (value != -1)
          {
               //printf("Processed temperature: %.2fÂ°C\n", value);
               printBuffer(&buffer);
               //printf("%d\n", buffer.head);
               //processBuffer(&buffer);
               // Add your processing logic here
          } else
          {
               printf("Buffer is empty\n");
          }
          sleep(1);
     }

     pthread_join(producerThread, NULL);
     pthread_mutex_destroy(&buffer.mutex);

     printBuffer(&buffer);
     freeBuffer(&buffer);
     return 0;
}
